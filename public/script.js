
const questions = {
    8: [
      {
        question: "I separate waste into dry and wet waste.",
        type: "black",
        description:
          "Separating waste helps in proper disposal and recycling. For example, dry waste like plastic and paper can be recycled, while wet waste like food scraps can be composted.",
      },
      {
        question:
          "I separate waste into food waste, paper, glass, metal, and plastic.",
        type: "black",
        description:
          "Separating different types of waste ensures they can be recycled effectively. For example, separating glass bottles from paper helps recycling centers process each material properly.",
      },
      {
        question: "I compost food waste.",
        type: "black",
        description:
          "Composting food waste helps reduce landfill and produces natural fertilizer. For example, composting vegetable peels and fruit scraps turns them into nutrient-rich soil for gardening.",
      },
      {
        question: "I hang a bird feeder to attract birds.",
        type: "black",
        description:
          "Providing food for birds supports local wildlife. For example, hanging a bird feeder with seeds attracts different bird species to your garden.",
      },
      {
        question: "I grow flowers to attract bees.",
        type: "black",
        description:
          "Bees are important pollinators for plants. For example, growing flowers like sunflowers and lavender helps attract bees and supports their role in pollination.",
      },
      {
        question:
          "I call the authorities if I see a stray animal injured or hurt.",
        type: "black",
        description:
          "Reporting injured animals ensures they get the help they need. For example, if you see an injured stray dog, calling the authorities can get the dog medical attention.",
      },
      {
        question: "I use a reusable water bottle.",
        type: "black",
        description:
          "Using reusable bottles reduces plastic waste. For example, carrying a metal or plastic reusable bottle reduces the need for single-use plastic bottles.",
      },
      {
        question: "I reduce plastic use by bringing my own bags for shopping.",
        type: "black",
        description:
          "Bringing reusable bags helps cut down on plastic bag use. For example, using cloth bags instead of plastic bags when shopping reduces plastic waste.",
      },
      {
        question: "I pick up litter in my neighborhood.",
        type: "black",
        description:
          "Cleaning up litter helps keep the environment clean. For example, organizing a neighborhood cleanup to pick up trash helps improve the local environment.",
      },
      {
        question: "I use public transportation or walk instead of using a car.",
        type: "black",
        description:
          "Using alternative transportation reduces carbon emissions. For example, taking the bus or walking to school instead of getting a ride reduces air pollution.",
      },
      {
        question: "I turn off the lights when I leave a room.",
        type: "black",
        description:
          "Turning off lights saves energy. For example, switching off the lights when you leave your bedroom helps reduce electricity consumption.",
      },
      {
        question: "I use energy-efficient light bulbs.",
        type: "black",
        description:
          "Energy-efficient bulbs use less electricity and last longer. For example, using LED bulbs instead of traditional incandescent bulbs can save energy and reduce electricity bills.",
      },
      {
        question: "I recycle paper, plastic, and metal.",
        type: "black",
        description:
          "Recycling helps reduce waste and conserve resources. For example, separating and recycling used paper, plastic bottles, and metal cans helps keep these materials out of landfills.",
      },
      {
        question: "I participate in local environmental events.",
        type: "black",
        description:
          "Engaging in environmental events promotes community involvement. For example, joining a local tree-planting event helps improve the environment and foster a sense of community.",
      },
      {
        question: "I plant trees and take care of plants.",
        type: "black",
        description:
          "Planting trees helps improve air quality and provides habitats for wildlife. For example, planting a tree in your yard and watering it regularly supports the environment.",
      },
      {
        question: "I use both sides of a piece of paper before recycling it.",
        type: "black",
        description:
          "Using both sides of paper reduces paper waste. For example, printing on both sides of a sheet of paper for school assignments reduces the number of sheets used.",
      },
      {
        question: "I avoid wasting food and use leftovers creatively.",
        type: "black",
        description:
          "Using leftovers helps reduce food waste. For example, making a soup from leftover vegetables prevents food from being thrown away.",
      },
      {
        question: "I make sure my family follows environmental practices.",
        type: "black",
        description:
          "Encouraging family to follow green practices amplifies environmental impact. For example, reminding family members to recycle and conserve water helps everyone contribute to environmental conservation.",
      },
      {
        question: "I am aware of how my actions affect the environment.",
        type: "black",
        description:
          "Being aware of one's environmental impact is the first step to making positive changes. For example, knowing that using plastic bags contributes to pollution can motivate you to use reusable bags instead.",
      },
      {
        question: "I help clean up parks and public spaces.",
        type: "black",
        description:
          "Helping clean public spaces keeps the environment pleasant and healthy. For example, volunteering in a park cleanup event helps remove trash and improve the area for everyone.",
      },
      {
        question: "I participate in school recycling programs.",
        type: "black",
        description:
          "School recycling programs help manage waste effectively. For example, sorting recyclables like paper and plastic into designated bins at school helps reduce waste.",
      },
      {
        question: "I use digital notes instead of paper for my schoolwork.",
        type: "black",
        description:
          "Using digital notes reduces paper consumption. For example, taking notes on a tablet or computer minimizes the need for paper notebooks.",
      },
      {
        question: "I help organize or participate in school clean-up days.",
        type: "black",
        description:
          "School clean-up days help maintain a tidy and safe environment. For example, participating in a school clean-up event helps keep the school grounds clean and litter-free.",
      },
      {
        question: "I use eco-friendly or recycled materials for school projects.",
        type: "black",
        description:
          "Using recycled materials for projects reduces waste. For example, making a model using recycled cardboard and plastic helps minimize environmental impact.",
      },
      {
        question:
          "I turn off computers and other electronic devices when not in use at school.",
        type: "black",
        description:
          "Turning off devices conserves energy. For example, shutting down computers at the end of the school day reduces unnecessary electricity use.",
      },
      {
        question: "I encourage my school to adopt green practices.",
        type: "black",
        description:
          "Advocating for green practices at school promotes environmental responsibility. For example, suggesting that the school install recycling bins helps improve waste management.",
      },
      {
        question: "I participate in or support school garden projects.",
        type: "black",
        description:
          "School garden projects teach about sustainability and healthy eating. For example, helping in a school garden project provides hands-on learning about growing vegetables and plants.",
      },
      {
        question:
          "I support and take part in school environmental clubs or groups.",
        type: "black",
        description:
          "Joining environmental clubs fosters awareness and action. For example, participating in an eco-club at school helps promote environmental initiatives and projects.",
      },
      {
        question: "I use eco-friendly lunch containers and utensils.",
        type: "black",
        description:
          "Using reusable lunch containers reduces waste. For example, packing lunch in a durable container and using metal utensils instead of disposables helps cut down on single-use plastics.",
      },
      {
        question:
          "I attend environmental awareness workshops or events organized by my school.",
        type: "black",
        description:
          "Attending workshops increases environmental knowledge. For example, participating in a school workshop about climate change helps understand environmental issues and solutions.",
      },
    ],
  
    18: [
      {
        question: "I practice reducing, reusing, and recycling in my daily life.",
        type: "black",
        description:
          "Implementing the 3 R‚Äôs helps minimize waste. For example, reusing glass jars for storage, recycling paper and plastic, and reducing unnecessary purchases contribute to environmental sustainability.",
      },
      {
        question:
          "I participate in campus sustainability initiatives and programs.",
        type: "black",
        description:
          "Joining campus programs promotes a culture of sustainability. For example, participating in a campus recycling program or sustainability club helps drive collective environmental action.",
      },
      {
        question: "I support and use renewable energy sources whenever possible.",
        type: "black",
        description:
          "Using renewable energy reduces reliance on fossil fuels. For example, opting for green energy plans or using solar-powered devices contributes to a cleaner energy future.",
      },
      {
        question:
          "I choose to buy products with minimal or eco-friendly packaging.",
        type: "black",
        description:
          "Opting for minimal packaging reduces waste. For example, selecting products with recyclable or biodegradable packaging helps lessen environmental impact.",
      },
      {
        question:
          "I advocate for and practice water conservation in my daily routine.",
        type: "black",
        description:
          "Conserving water is essential for sustainability. For example, fixing leaks, taking shorter showers, and using water-saving fixtures help reduce overall water usage.",
      },
      {
        question:
          "I make conscious food choices, such as eating less meat or supporting local farmers.",
        type: "black",
        description:
          "Sustainable food choices reduce environmental impact. For example, incorporating more plant-based meals and buying locally grown produce support sustainable agriculture and reduce carbon footprint.",
      },
      {
        question:
          "I use public transportation or bike instead of driving whenever possible.",
        type: "black",
        description:
          "Alternative transportation reduces carbon emissions. For example, taking the bus or riding a bike instead of driving helps cut down on air pollution and traffic congestion.",
      },
      {
        question:
          "I engage in environmental activism or support environmental policies.",
        type: "black",
        description:
          "Activism and policy support drive systemic change. For example, participating in environmental campaigns or supporting green policies helps advocate for broader environmental protection.",
      },
      {
        question:
          "I reduce my energy consumption by unplugging devices and using energy-efficient appliances.",
        type: "black",
        description:
          "Reducing energy consumption lowers utility bills and environmental impact. For example, unplugging chargers when not in use and using energy-efficient appliances conserve electricity.",
      },
      {
        question:
          "I educate myself and others about climate change and its impacts.",
        type: "black",
        description:
          "Education promotes awareness and action. For example, attending lectures on climate change or sharing information about its impacts helps spread knowledge and encourage environmental responsibility.",
      },
      {
        question:
          "I practice sustainable shopping by choosing ethically sourced and fair-trade products.",
        type: "black",
        description:
          "Ethical shopping supports fair labor practices and sustainable production. For example, buying fair-trade coffee or ethically sourced clothing supports better practices in production and trade.",
      },
      {
        question:
          "I support and engage in local clean-up efforts and community service.",
        type: "black",
        description:
          "Local clean-up efforts improve community environments. For example, participating in beach clean-ups or neighborhood litter-picking helps maintain clean and healthy public spaces.",
      },
      {
        question:
          "I incorporate eco-friendly habits into my study and work environment.",
        type: "black",
        description:
          "Eco-friendly habits at work and study reduce overall impact. For example, using recycled paper and reducing waste in your study space supports a more sustainable lifestyle.",
      },
      {
        question:
          "I reduce food waste by planning meals and properly storing leftovers.",
        type: "black",
        description:
          "Minimizing food waste helps conserve resources and reduce landfill. For example, meal planning and using proper storage techniques prevent food from spoiling and being wasted.",
      },
      {
        question:
          "I participate in sustainability workshops and seminars to enhance my knowledge.",
        type: "black",
        description:
          "Workshops and seminars provide valuable information on sustainability. For example, attending a seminar on sustainable living practices helps you stay informed and adopt eco-friendly habits.",
      },
      {
        question:
          "I support companies and brands that prioritize environmental sustainability.",
        type: "black",
        description:
          "Supporting sustainable brands promotes responsible business practices. For example, purchasing from companies that use renewable resources or have eco-friendly policies encourages more businesses to adopt sustainable practices.",
      },
      {
        question:
          "I actively participate in campus or community recycling programs.",
        type: "black",
        description:
          "Active participation in recycling programs helps manage waste. For example, separating recyclables and ensuring proper disposal supports effective recycling and waste management.",
      },
      {
        question: "I use digital resources to minimize paper use.",
        type: "black",
        description:
          "Digital resources reduce paper consumption and waste. For example, using digital notes and e-books instead of printed materials helps lower paper usage.",
      },
      {
        question:
          "I practice mindful consumption by assessing the need before making purchases.",
        type: "black",
        description:
          "Mindful consumption reduces unnecessary waste. For example, evaluating whether you need an item before buying it helps prevent impulse purchases and excess waste.",
      },
      {
        question: "I volunteer for environmental organizations or initiatives.",
        type: "black",
        description:
          "Volunteering supports environmental causes and community efforts. For example, helping out with tree-planting events or environmental advocacy groups contributes to positive environmental change.",
      },
      {
        question:
          "I implement green practices in my personal and academic projects.",
        type: "black",
        description:
          "Green practices in projects promote sustainability. For example, using sustainable materials and methods in academic or personal projects reduces environmental impact.",
      },
      {
        question:
          "I stay informed about environmental issues through news, articles, or documentaries.",
        type: "black",
        description:
          "Staying informed enhances awareness of environmental issues. For example, reading articles on climate change or watching documentaries helps you understand and address current environmental challenges.",
      },
      {
        question: "I choose to support and use sustainable fashion brands.",
        type: "black",
        description:
          "Sustainable fashion supports ethical production. For example, buying from brands that use eco-friendly materials or ethical labor practices promotes responsible fashion choices.",
      },
      {
        question:
          "I minimize single-use plastics by opting for reusable alternatives.",
        type: "black",
        description:
          "Reducing single-use plastics lowers environmental pollution. For example, using reusable straws and containers instead of disposable ones helps cut down on plastic waste.",
      },
      {
        question:
          "I engage in discussions about sustainability and encourage others to adopt green practices.",
        type: "black",
        description:
          "Encouraging discussions fosters collective environmental action. For example, talking about sustainability with friends and family helps spread awareness and motivate others to make eco-friendly choices.",
      },
      {
        question:
          "I support and use sustainable transportation methods like carpooling or electric vehicles.",
        type: "black",
        description:
          "Sustainable transportation methods reduce carbon emissions. For example, carpooling with others or using an electric vehicle helps lower your environmental footprint.",
      },
      {
        question:
          "I practice energy-saving measures, such as turning off lights and using energy-efficient appliances.",
        type: "black",
        description:
          "Energy-saving measures help reduce overall consumption. For example, switching off lights when not needed and using energy-efficient appliances lower electricity usage and costs.",
      },
      {
        question:
          "I engage in sustainable campus or community events, such as eco-fairs or green workshops.",
        type: "black",
        description:
          "Participating in sustainability events promotes environmental education. For example, attending an eco-fair or green workshop provides opportunities to learn and engage with sustainability topics.",
      },
      {
        question: "I practice proper waste segregation and disposal.",
        type: "black",
        description:
          "Proper waste segregation ensures effective recycling and disposal. For example, separating recyclables from general waste and disposing of hazardous materials correctly supports waste management efforts.",
      },
      {
        question:
          "I choose to reduce my carbon footprint by making eco-conscious travel choices.",
        type: "black",
        description:
          "Eco-conscious travel reduces environmental impact. For example, opting for train travel over flights or choosing eco-friendly accommodations helps lower your carbon footprint while traveling.",
      },
    ],
  
    26: [
      {
        question:
          "I implement a comprehensive recycling program at home and work.",
        type: "black",
        description:
          "Effective recycling programs help manage waste and conserve resources. For example, setting up separate bins for paper, plastic, and metal at home and work ensures proper recycling and reduces landfill waste.",
      },
      {
        question:
          "I invest in energy-efficient home improvements, such as solar panels or smart thermostats.",
        type: "black",
        description:
          "Energy-efficient improvements reduce utility costs and environmental impact. For example, installing solar panels or a smart thermostat helps lower energy consumption and reduce carbon footprint.",
      },
      {
        question:
          "I support and advocate for sustainable business practices within my professional sphere.",
        type: "black",
        description:
          "Advocating for sustainable business practices promotes environmental responsibility. For example, encouraging your company to adopt green policies or sustainable supply chain practices supports broader environmental goals.",
      },
      {
        question:
          "I make conscious decisions to minimize my carbon footprint during travel.",
        type: "black",
        description:
          "Reducing carbon footprint during travel helps mitigate climate change. For example, choosing direct flights, using public transportation, or opting for eco-friendly accommodations lowers travel-related emissions.",
      },
      {
        question:
          "I support policies and legislation aimed at environmental conservation and climate action.",
        type: "black",
        description:
          "Supporting environmental policies drives systemic change. For example, advocating for renewable energy incentives or participating in environmental lobbying efforts helps influence legislation for a sustainable future.",
      },
      {
        question:
          "I actively participate in or donate to environmental conservation projects and charities.",
        type: "black",
        description:
          "Contributing to conservation projects supports environmental protection efforts. For example, donating to organizations focused on wildlife conservation or participating in habitat restoration projects helps preserve natural ecosystems.",
      },
      {
        question:
          "I practice mindful consumption by evaluating the lifecycle impact of products before purchasing.",
        type: "black",
        description:
          "Mindful consumption reduces environmental impact. For example, researching the sustainability of products and choosing those with minimal environmental impact supports responsible purchasing practices.",
      },
      {
        question:
          "I incorporate sustainable practices into my investment strategy, such as investing in green bonds or sustainable funds.",
        type: "black",
        description:
          "Sustainable investing aligns financial goals with environmental values. For example, investing in green bonds or funds that focus on renewable energy supports projects with positive environmental impacts.",
      },
      {
        question:
          "I practice water conservation by implementing measures like rainwater harvesting or low-flow fixtures.",
        type: "black",
        description:
          "Water conservation measures help preserve this vital resource. For example, installing low-flow fixtures or setting up a rainwater harvesting system reduces water usage and promotes sustainability.",
      },
      {
        question:
          "I engage in or support local sustainability initiatives, such as community gardens or farmers' markets.",
        type: "black",
        description:
          "Local sustainability initiatives foster community engagement and environmental responsibility. For example, participating in a community garden or shopping at farmers' markets supports local agriculture and reduces food miles.",
      },
      {
        question:
          "I promote and practice waste reduction strategies, such as composting and avoiding single-use items.",
        type: "black",
        description:
          "Waste reduction strategies minimize landfill contributions. For example, composting organic waste and using reusable containers help reduce the amount of waste sent to landfills.",
      },
      {
        question:
          "I support and use green energy solutions for my home or business.",
        type: "black",
        description:
          "Green energy solutions reduce reliance on fossil fuels. For example, using wind or solar energy for your home or business supports renewable energy sources and lowers your carbon footprint.",
      },
      {
        question:
          "I actively seek and promote sustainable practices within my professional network and industry.",
        type: "black",
        description:
          "Promoting sustainability within your industry helps drive collective action. For example, encouraging industry peers to adopt sustainable practices or certifications supports broader environmental goals.",
      },
      {
        question:
          "I adopt a plant-based or reduced-meat diet to lower my environmental impact.",
        type: "black",
        description:
          "A plant-based diet reduces greenhouse gas emissions and resource use. For example, incorporating more plant-based meals into your diet or reducing meat consumption supports environmental sustainability.",
      },
      {
        question:
          "I participate in environmental impact assessments for projects or initiatives I am involved in.",
        type: "black",
        description:
          "Environmental impact assessments help identify and mitigate negative effects. For example, conducting an assessment before starting a project ensures that environmental considerations are incorporated into planning and decision-making.",
      },
      {
        question:
          "I educate myself and others about sustainable living practices through workshops, courses, or reading materials.",
        type: "black",
        description:
          "Education on sustainable living promotes informed decision-making. For example, attending workshops or reading books on sustainability helps increase knowledge and encourages others to adopt eco-friendly practices.",
      },
      {
        question:
          "I reduce my energy consumption by optimizing home heating and cooling systems.",
        type: "black",
        description:
          "Optimizing heating and cooling systems reduces energy use. For example, setting your thermostat to an energy-efficient temperature and ensuring proper insulation helps lower energy bills and environmental impact.",
      },
      {
        question:
          "I support and practice sustainable fashion by choosing clothing made from eco-friendly materials.",
        type: "black",
        description:
          "Sustainable fashion reduces environmental impact. For example, buying clothing made from organic cotton or recycled materials supports eco-friendly fashion practices.",
      },
      {
        question:
          "I participate in or support urban green space development and maintenance.",
        type: "black",
        description:
          "Urban green spaces enhance community well-being and environmental health. For example, participating in or supporting initiatives to develop and maintain parks and green areas contributes to urban sustainability.",
      },
      {
        question:
          "I advocate for and implement green building practices in my home or business.",
        type: "black",
        description:
          "Green building practices improve energy efficiency and sustainability. For example, incorporating energy-efficient materials and designs into building projects supports environmentally friendly construction.",
      },
      {
        question:
          "I choose eco-friendly transportation options, such as electric vehicles or carpooling.",
        type: "black",
        description:
          "Eco-friendly transportation reduces carbon emissions. For example, driving an electric vehicle or sharing rides with others helps decrease overall vehicle emissions.",
      },
      {
        question: "I support local renewable energy projects and initiatives.",
        type: "black",
        description:
          "Supporting local renewable energy projects fosters sustainable energy use. For example, investing in or advocating for community solar projects helps promote clean energy solutions.",
      },
      {
        question:
          "I practice eco-friendly habits in my daily routine, such as reducing water and energy use.",
        type: "black",
        description:
          "Daily eco-friendly habits contribute to overall sustainability. For example, using water-saving devices and turning off unused appliances helps conserve resources and reduce environmental impact.",
      },
      {
        question:
          "I participate in or support educational programs that promote environmental awareness and action.",
        type: "black",
        description:
          "Educational programs enhance environmental awareness and action. For example, supporting or participating in programs that educate others about sustainability helps spread knowledge and inspire action.",
      },
      {
        question:
          "I make informed purchasing decisions by considering the environmental impact of products.",
        type: "black",
        description:
          "Informed purchasing decisions reduce environmental impact. For example, choosing products with minimal packaging or those made from sustainable materials supports eco-friendly consumption.",
      },
      {
        question:
          "I encourage and mentor others in adopting sustainable practices.",
        type: "black",
        description:
          "Mentoring and encouragement help spread sustainability practices. For example, guiding colleagues or friends on how to implement eco-friendly habits fosters a culture of environmental responsibility.",
      },
      {
        question:
          "I support conservation efforts by participating in or donating to wildlife protection programs.",
        type: "black",
        description:
          "Supporting wildlife protection programs aids in the conservation of endangered species. For example, participating in or donating to wildlife protection initiatives helps preserve natural habitats and protect biodiversity.",
      },
      {
        question:
          "I use green cleaning products and practices in my home and workplace.",
        type: "black",
        description:
          "Green cleaning products reduce environmental harm. For example, using biodegradable cleaning agents and reducing chemical use helps maintain a healthier indoor environment and supports sustainability.",
      },
      {
        question:
          "I actively engage in community efforts to promote environmental sustainability.",
        type: "black",
        description:
          "Community engagement drives collective environmental action. For example, participating in local sustainability initiatives or organizing community clean-ups helps improve local environmental conditions.",
      },
      {
        question:
          "I stay informed about and support advances in environmental technology and innovation.",
        type: "black",
        description:
          "Supporting environmental technology promotes sustainable development. For example, staying informed about innovations in renewable energy or waste management helps support advancements that benefit the environment.",
      },
    ],
  };
  
  const scoringInfo = {
    black: [
      ["Never", 0],
      ["Sometimes (around 30% of the time)", 3],
      ["Usually (around 70% of the time)", 5],
      ["Always (you do it almost every time or every time you could do it)", 7],
      ["Have never thought about it/Not in my control", 1],
      ["Not Applicable/Can‚Äôt Say", 1],
    ],
    red: [
      ["Never", 7],
      ["Sometimes (around 30% of the time)", 5],
      ["Usually (around 70% of the time)", 3],
      ["Always (you do it almost every time)", 0],
      ["Have never thought about it/Not in my control", 1],
      ["Not Applicable/Can‚Äôt Say", 1],
    ],
    // Add more types as needed
  };

  const games = [
    { name: 'Game1', file: 'renewable_game/renewable.html' },
    { name: 'Game2', file: 'arcade_game/arcade.html' },
    { name: 'Game3', file: 'greencity_game/greenindex.html' },
    { name: 'Game4', file: 'lightsout_game/light.html' },
    { name: 'Game5', file: 'quiz_game/quiz.html' },
    { name: 'Game6', file: 'raindrop_game/raindrop.html' },
    { name: 'Game7', file: 'trashtalk_game/trash_Talk.html' },
    { name: 'Game8', file: 'treecatcher_game/tree.html' }
  ];
  
  function resumeQuiz() {
    loadQuizState();
    // console.log("curr", currentQuestionIndex);
    if (currentQuestionIndex == 0) {
        return;
    } else {
        document.getElementById("quizSection").style.display = "block";
        document.getElementById("ageSection").style.display = "none";
        displayQuestion();

    }
}
  

  let currentQuestionIndex = 0;
  let userQuestions = [];
  let score = 0;
  var ageBin;
  let gameIndex = 0;
  var selectedGames = [];
  var formData = {};

  // Function to show the current question
  function showQuestion() {
      
      const age = parseInt(document.getElementById("ageInput").value);

      formData = {
        name: document.getElementById('nameP').value,
        age: age,
        email: document.getElementById('emailId').value,
    };
      let questionList = [];
      selectRandomGames();
      // console.log(selectedGames);
  
      if (!document.getElementById("nameP").value || !document.getElementById("emailId").value) {
          showCustomAlert("Please fill the remaining information!");
          return;
      }
  
      if (age >= 8 && age <= 17) {
          questionList = questions[8];
          ageBin = 8;
      } else if (age >= 18 && age <= 25) {
          questionList = questions[18];
          ageBin = 18;
      } else if (age > 25) {
          questionList = questions[26];
          ageBin = 26;
      } else {
          showCustomAlert("Age is out of range.");
          return;
      }
  
      if (!Array.isArray(questionList) || questionList.length === 0) {
          showCustomAlert("No questions available for the selected age group.");
          return;
      }
      userQuestions = getRandomQuestions(questionList, 20);
      displayQuestion();
      document.getElementById("ageSection").style.display = "none";
      document.getElementById("quizSection").style.display = "block";
  }
  
  // Function to get random questions
  function getRandomQuestions(questionList, numQuestions) {
      const shuffled = questionList.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, numQuestions);
  }
  
  // Function to display the current question
  function displayQuestion() {
      // console.log(currentQuestionIndex);
      if (currentQuestionIndex>19){
        updateResultImage(score);
          document.getElementById("quizSection").style.display = "none";
          document.getElementById("resultSection").style.display = "flex";
          return;
      }
      const currentQuestion = userQuestions[currentQuestionIndex];
      // console.log(currentQuestion);
      document.getElementById("question").textContent = currentQuestion.question;
      document.getElementById("desc").textContent = currentQuestion.description;
  
      // Clear previously selected radio button
      // document.querySelector('input[name="answer"]:checked')?.checked = false;
  
      document.getElementById("questionNumber").innerHTML = `${currentQuestionIndex + 1} / 20`;
  }
  
  // Function to submit the answer
  function submitAnswer() {
      const currentQuestion = userQuestions[currentQuestionIndex];
      const selectedOption = parseInt(document.querySelector('input[name="answer"]:checked')?.value);
      // console.log(parseInt(document.querySelector('input[name="answer"]:checked')?.value));
  
      if (isNaN(selectedOption)) {
          showCustomAlert("Please select an option  ");
          return;
      }
  
      const questionType = currentQuestion.type;
      const option = scoringInfo[questionType][selectedOption];
      const scoreForOption = option ? option[1] : 0;
  
      score += scoreForOption;
  
      currentQuestionIndex++;
  
      if (currentQuestionIndex === 4 || currentQuestionIndex === 9 || currentQuestionIndex === 14 || currentQuestionIndex === 19) {
           currentQuestionIndex++;

          showGameAlert("The next question is a Mini Game!");
      } else if (currentQuestionIndex < 19) {
          displayQuestion();
      } else {
          updateResultImage(score);
          document.getElementById("quizSection").style.display = "none";
          document.getElementById("resultSection").style.display = "flex";
      }
  }
  
  // Function to save quiz state
  function saveQuizState() {
      localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
      localStorage.setItem('userQuestions', JSON.stringify(userQuestions));
      localStorage.setItem('score', score);
      localStorage.setItem('ageBin', ageBin);
      localStorage.setItem('selectedGames', JSON.stringify(selectedGames));
      localStorage.setItem('gameIndex', gameIndex + 1);
      localStorage.setItem('formData', JSON.stringify(formData));

  }
  
  // Function to load quiz state
  function loadQuizState() {
      currentQuestionIndex = parseInt(localStorage.getItem('currentQuestionIndex')) || 0;
      userQuestions = JSON.parse(localStorage.getItem('userQuestions')) || [];
      score = parseInt(localStorage.getItem('score')) || 0;
      ageBin = parseInt(localStorage.getItem('ageBin')) || 0;
      selectedGames = JSON.parse(localStorage.getItem('selectedGames')) || [];
      gameIndex = parseInt(localStorage.getItem('gameIndex')) || 0;
      formData = JSON.parse(localStorage.getItem('formData')) || {};
  }
  
  // Function to select random games
  function selectRandomGames() {
      const shuffled = [...games].sort(() => 0.5 - Math.random());
      selectedGames = shuffled.slice(0, 4);
  }
  
  // Function to redirect to a game
  function redirectToGame() {
      // console.log(gameIndex, selectedGames);
      window.location.href = selectedGames[gameIndex]["file"];
  }
  
  // Function to resume quiz
  
  // Function to clear quiz state
  function clearQuizState() {
      localStorage.removeItem('currentQuestionIndex');
      localStorage.removeItem('userQuestions');
      localStorage.removeItem('score');
      localStorage.removeItem('ageBin');
      localStorage.removeItem('selectedGames');
      localStorage.removeItem('gameIndex');
      localStorage.removeItem('formData');
  }
  
  // Function to update result image and message
  function updateResultImage(score) {
      const scorePercent = ((score/112)*100).toFixed(0);
      const resultImage = document.getElementById("resultImage");
      const resultMessage = document.getElementById("resultMessage");
      const quizRes = document.getElementById("quizRes");
      const meterImage = document.getElementById("meterImage");
      const links = {
          8: [
              "https://www.natgeokids.com/uk/discover/science/nature/how-to-save-the-planet/",
              "https://www.bbc.co.uk/bitesize/topics/zt3k96f/articles/zwjdkty#z8hhtrd"
          ],
          18: [
              "https://www.connect4climate.org/initiative/5-ways-young-people-can-help-combat-climate-change",
              "https://ivypanda.com/blog/green-tips-for-students/"
          ],
          26: [
              "https://theminimalistvegan.com/live-a-more-sustainable-lifestyle/",
              "https://www.biologicaldiversity.org/programs/population_and_sustainability/sustainability/live_more_sustainably.html"
          ]
      }
      putData(formData,scorePercent);
  
      if (scorePercent < 50) {
          resultImage.src = "crying.png";
          meterImage.src = "l1.png"
          resultMessage.innerHTML = `
              <section>
                  <h2 id="yourScore" style="text-align: center;"></h2>
                  <h3>Local Actions You Can Take</h3>
                  <ul>
                      <li>Participate in community clean-ups</li>
                      <li>Support local farmers and sustainable food practices</li>
                      <li>Reduce single-use plastics</li>
                      <li>Volunteer for environmental organizations</li>
                  </ul>
              </section>
              <section>
                  <h3>Learn More About Sustainability</h3>
                  <p>Explore resources to better understand sustainability and how you can make a difference.</p>
                  <a id="ref" href="" target="_blank" class="button">Discover More Ways to Help</a>
              </section>
              <footer>
                  <p>Remember, every small step counts towards a better future for our planet!</p>
              </footer>`;
          quizRes.innerText = "Mother Earth Expects Better!";
          document.getElementById("ref").href = links[ageBin][0];
          document.getElementById("yourScore").innerText = `Your Score: ${scorePercent}%`;
  
      } else if (scorePercent <= 75) {
          resultImage.src = "smiling.png";
          meterImage.src = "l2.png"
  
          resultMessage.innerHTML = `
              <section>
                  <h2 id="yourScore" style="text-align: center;"></h2>
                  <h3>Tips to Enhance Your Sustainability</h3>
                  <ul>
                      <li>Reduce energy consumption at home</li>
                      <li>Increase recycling efforts</li>
                      <li>Choose sustainable products and services</li>
                  </ul>
              </section>
              <section>
                  <h3>Understanding Sustainability</h3>
                  <p>Learn about the importance of sustainability and how your actions contribute to a healthier planet.</p>
                  <a id="ref" href="" target="_blank" class="button">Discover More Ways to Help</a>
              </section>
              <footer>
                  <p>Keep up the great work! Every action makes a difference.</p>
              </footer>`;
          quizRes.innerText = "Good Effort, Keep Going!";
          document.getElementById("ref").href = links[ageBin][1];
          document.getElementById("yourScore").innerText = `Your Score: ${scorePercent}%`;
  
      } else {
          resultImage.src = "happy.png";
          meterImage.src = "l3.png"
  
          resultMessage.innerHTML = `
              <section>
                  <h2 id="yourScore" style="text-align: center;"></h2>
                  <h3>Your Impact</h3>
                  <p>üéâ <strong>Congratulations!</strong> üåç</p>
                  <p>Your dedication to sustainability is truly remarkable. By making conscious choices and taking action, you have made a significant and positive impact on our planet. Your efforts are not just changing your own life, but also contributing to a greener, healthier, and more sustainable world for everyone.</p>
                  <p>üåü <strong>Here‚Äôs how you‚Äôve made a difference:</strong></p>
                  <ul>
                      <li>Reduced carbon footprint by making eco-friendly choices</li>
                      <li>Conserved natural resources through responsible consumption</li>
                      <li>Supported sustainable practices and innovations</li>
                  </ul>
              </section>
              <footer>
                  <p>Thank you for being a champion for our planet! Continue to inspire others with your actions.</p>
              </footer>`;
          quizRes.innerText = "Mother Earth Thanks You!";
          document.getElementById("yourScore").innerText = `Your Score: ${scorePercent}%`;
      }
  }
  
  // Function to restart the quiz
  function restartQuiz() {
      currentQuestionIndex = 0;
      userQuestions = [];
      score = 0;
      gameIndex = 0;
      selectedGames = [];
  
      clearQuizState();
      document.getElementById("ageSection").style.display = "block";
      document.getElementById("quizSection").style.display = "none";
      document.getElementById("resultSection").style.display = "none";
      document.getElementById("ageInput").value = "";
      document.getElementById("nameP").value = "";
      document.getElementById("emailId").value = "";
  }
  
  function showCustomAlert(message) {
      document.getElementById("customAlertMessage").textContent = message;
      document.getElementById("customAlert").style.display = "block";
  }
  
  function closeCustomAlert() {
      document.getElementById("customAlert").style.display = "none";
  }
  
  function showGameAlert(message) {
      document.getElementById("gameAlertMessage").textContent = message;
      document.getElementById("gameAlert").style.display = "block";
  }
  
  function closeGameAlert() {
      saveQuizState();
      redirectToGame();
  }
  
async function putData(formData,score){
            formData['score'] = score;
            // console.log(formData);
            fetch('/api/submit', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify(formData)
          })
          .then(response => response.json())
          .then(data => {
              console.log('Success:', data);
          })
          .catch((error) => {
              console.log(error);
              console.error('Error:', error);
          });
          
        };
      
